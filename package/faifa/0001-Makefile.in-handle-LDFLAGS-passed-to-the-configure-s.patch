From 62cafe305f4b9f5fb4305dcfb68ae3144efc3353 Mon Sep 17 00:00:00 2001
From: Fabio Porcedda <Fabio Porcedda fabio.porcedda@gmail>
Date: Wed, 18 Feb 2015 17:58:23 +0100
Subject: [PATCH] Makefile.in: handle LDFLAGS passed to the configure script

Taking in account CFLAGS and LDFLAGS passed to the configure script is a
common behaviour.

This fix is also useful for supporting the per-package staging directory
within Buildroot.

Signed-off-by: Fabio Porcedda <Fabio Porcedda fabio.porcedda@gmail>
---
 Makefile.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/Makefile.in b/Makefile.in
index b1b7c58..792ac82 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -14,6 +14,7 @@
 CC	= @CC@
 STRIP	?= $(CROSS)strip
 CFLAGS	= @CFLAGS@
+LDFLAGS	= @LDFLAGS@
 INSTALL	= @INSTALL@
 LIBS	= @LIBS@
 
@@ -50,7 +51,7 @@ SIM_LIBS:=-levent
 SIM_CFLAGS:=-Wno-unused
 
 ifeq ($(OS),DARWIN)
-LDFLAGS:=-dynamiclib -Wl,-dylib_install_name -Wl,$(LIB_SONAME)
+LDFLAGS+=-dynamiclib -Wl,-dylib_install_name -Wl,$(LIB_SONAME)
 endif
 
 LIBS:=$(LDFLAGS) $(LIBS)
-- 
2.3.0

